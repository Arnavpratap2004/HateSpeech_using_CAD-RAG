py : C:\Users\Arnav\Desktop\
CAD-RAG\cad_rag_full.py:91: 
LangChainDeprecationWarning:
 The class `Chroma` was 
deprecated in LangChain 
0.2.9 and will be removed 
in 1.0. An updated version 
of the class exists in the 
`langchain-chroma package 
and should be used instead. 
To use it run `pip install 
-U `langchain-chroma` and 
import as `from 
`langchain_chroma import 
Chroma``.
At line:1 char:1
+ py cad_rag_full.py 2>&1 | 
Out-File -FilePath 
cad_rag_output_full.txt  ...
+ ~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          
    : NotSpe    cified: 
(C:\User    
s\Arnav\...mport     
Chroma``.:Strin    g) [], 
RemoteExc    eption
    + FullyQualified    
ErrorId : Native    
CommandError
 
  slur_lexicon_db = Chroma(
Transaction failed and will 
be retried in 
0.8263211201344239s (Failed 
to DNS resolve address 45d0c
533.databases.neo4j.io:7687:
 [Errno 11001] getaddrinfo 
failed)
Transaction failed and will 
be retried in 
2.261741221373553s (Failed 
to DNS resolve address 45d0c
533.databases.neo4j.io:7687:
 [Errno 11001] getaddrinfo 
failed)
Transaction failed and will 
be retried in 
3.3104387772625206s (Failed 
to DNS resolve address 45d0c
533.databases.neo4j.io:7687:
 [Errno 11001] getaddrinfo 
failed)
Transaction failed and will 
be retried in 
8.981657132908053s (Failed 
to DNS resolve address 45d0c
533.databases.neo4j.io:7687:
 [Errno 11001] getaddrinfo 
failed)
Transaction failed and will 
be retried in 
17.33103107675319s (Failed 
to DNS resolve address 45d0c
533.databases.neo4j.io:7687:
 [Errno 11001] getaddrinfo 
failed)
======================================================================
CAD-RAG: Content Analysis Detection using RAG
Full Local Execution
======================================================================

[Block 2] Setting up environment...
Loaded API keys from .env file
Google API Key: [OK] Available
News API Key: [OK] Available
Neo4j: [OK] Available
Environment setup complete.

[Block 3] Initializing ChromaDB Vector Store...
ChromaDB initialized at: C:\Users\Arnav\Desktop\CAD-RAG\cad_rag_chroma
Slur lexicon collection count: 2
Reclaimed speech collection count: 2
LangChain vector stores initialized with Google embeddings.

[Block 4] Populating Knowledge Base...
Loading spaCy en_core_web_lg model...
spaCy model loaded successfully.
Slur lexicon count: 2
Reclaimed speech count: 2
Neo4j driver initialized.

Fetching news articles...
Could not fetch news articles: Failed to DNS resolve address 45d0c533.databases.neo4j.io:7687: [Errno 11001] getaddrinfo failed

[Block 5] Defining Pre-Retrieval Analysis...
Pre-retrieval analysis function defined.

[Block 6] Setting up RAG Agent...
RAG Agent initialized successfully (using direct queries).

[Block 7] Training ML Model...
Loading training data from: C:\Users\Arnav\Desktop\CAD-RAG\train.csv
Training data: 26000 samples, 8 columns

Class distribution:
toxic            12257
severe_toxic      1284
obscene           6780
threat             386
insult            6295
identity_hate     1100
dtype: int64

Training TF-IDF vectorizer...
Training Logistic Regression model...
Model training completed!

Loading test data from: C:\Users\Arnav\Desktop\CAD-RAG\traintest.csv
Test data: 4957 samples

Cross-Domain Evaluation Metrics:
  hate_speech: Acc=0.355, Prec=0.211, Rec=0.871, F1=0.340
  offensive_language: Acc=0.780, Prec=0.983, Rec=0.757, F1=0.856
  neither: Acc=0.817, Prec=0.635, Rec=0.509, F1=0.565

[Block 8] Defining Helper Functions...
Helper functions defined.

[Block 9] Defining Main Analysis Function...
Main analysis function defined.

======================================================================
EXAMPLE USAGE - Testing with Sample Sentences
======================================================================

======================================================================
ANALYZING: 'All muslims should be kicked out'
======================================================================

Entities found: ['muslims']
Neologisms found: []
Sentence category: Religion-based hate

ML Model Result: HATEFUL
Detected labels: ['identity_hate']
Top probabilities: [('identity_hate', '0.769'), ('toxic', '0.436'), ('insult', '0.373')]

RAG Context: Contextual Result for 'muslims': No recent news events found....
LLM error: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\nPlease retry in 1.628343268s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerDayPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '1s'}]}}

======================================================================
ANALYZING: 'Have a great day everyone!'
======================================================================

Entities found: []
Neologisms found: []
Sentence category: General Hate

ML Model Result: HATEFUL
Detected labels: ['identity_hate']
Top probabilities: [('identity_hate', '0.545'), ('insult', '0.415'), ('threat', '0.394')]

RAG Context: No specific entities or neologisms found to query....
LLM error: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\nPlease retry in 968.931012ms.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerDayPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '0s'}]}}

======================================================================
ANALYZING: 'Women belong in the kitchen'
======================================================================

Entities found: []
Neologisms found: []
Sentence category: Gender-based hate

ML Model Result: NOT_HATEFUL
Top probabilities: [('identity_hate', '0.437'), ('obscene', '0.288'), ('insult', '0.279')]

RAG Context: No specific entities or neologisms found to query....
LLM error: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\nPlease retry in 391.90772ms.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerDayPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '0s'}]}}

======================================================================
ANALYZING: 'You are such an idiot, I hate you'
======================================================================

Entities found: []
Neologisms found: []
Sentence category: General Hate

ML Model Result: HATEFUL
Detected labels: ['toxic', 'severe_toxic', 'obscene', 'insult']
Top probabilities: [('toxic', '1.000'), ('insult', '0.998'), ('obscene', '0.886')]

RAG Context: No specific entities or neologisms found to query....
LLM error: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\nPlease retry in 59.756633999s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerDayPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '59s'}]}}

======================================================================
ANALYZING: 'Thank you for your help!'
======================================================================

Entities found: []
Neologisms found: []
Sentence category: General Hate

ML Model Result: NOT_HATEFUL
Top probabilities: [('insult', '0.126'), ('threat', '0.114'), ('identity_hate', '0.095')]

RAG Context: No specific entities or neologisms found to query....
LLM error: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash\nPlease retry in 59.203664526s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_input_token_count', 'quotaId': 'GenerateContentInputTokensPerModelPerMinute-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerMinutePerProjectPerModel-FreeTier', 'quotaDimensions': {'model': 'gemini-2.0-flash', 'location': 'global'}}, {'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerDayPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.0-flash'}}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '59s'}]}}

======================================================================
SUMMARY OF RESULTS
======================================================================

  'All muslims should be kicked out...' -> HATEFUL
    Labels: ['identity_hate']

  'Have a great day everyone!...' -> HATEFUL
    Labels: ['identity_hate']

  'Women belong in the kitchen...' -> NOT_HATEFUL

  'You are such an idiot, I hate you...' -> HATEFUL
    Labels: ['toxic', 'severe_toxic', 'obscene', 'insult']

  'Thank you for your help!...' -> NOT_HATEFUL

======================================================================
CAD-RAG EXECUTION COMPLETED SUCCESSFULLY!
======================================================================
